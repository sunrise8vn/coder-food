import{a as P,g as q,s as v,_ as c,e as i,u as M,f as $,j as o,h as U,i as _,c as E,r as W,b as w,d as D,p as H,q as A,t as Q,v as K,Q as Z,w as J,R as X,T as Y,k as ee}from"./index-31KTgYJE.js";import{S as oe,u as re,C as te,B as G,A as ae,d as ne,T as b,b as se,e as le,F,L as ie,c as ce,a as C}from"./object-PZxqVlsC.js";import{C as ue,G as u}from"./Grid-b6ev4QfJ.js";import{T as de}from"./Typography-ThIkhuDa.js";import{u as he,f as me}from"./Input-JY0YtHyS.js";import{B as pe}from"./Button-pkHz8HGi.js";import"./Modal-aDGXqY_i.js";import"./utils-VBEYguCc.js";import"./Paper-utcU2O7-.js";import"./GlobalStyles-8tykBy_y.js";function fe(e){return P("MuiFormGroup",e)}q("MuiFormGroup",["root","row","error"]);const xe=["className","row"],ge=e=>{const{classes:r,row:t,error:a}=e;return _({root:["root",t&&"row",a&&"error"]},fe,r)},Ce=v("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,t.row&&r.row]}})(({ownerState:e})=>c({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),ve=i.forwardRef(function(r,t){const a=M({props:r,name:"MuiFormGroup"}),{className:n,row:s=!1}=a,f=$(a,xe),d=he(),x=me({props:a,muiFormControl:d,states:["error"]}),m=c({},a,{row:s,error:x.error}),h=ge(m);return o.jsx(Ce,c({className:U(h.root,n),ownerState:m,ref:t},f))}),ke=ve,je=E(o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),Re=E(o.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),be=v("span",{shouldForwardProp:W})({position:"relative",display:"flex"}),we=v(je)({transform:"scale(1)"}),ye=v(Re)(({theme:e,ownerState:r})=>c({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},r.checked&&{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}));function V(e){const{checked:r=!1,classes:t={},fontSize:a}=e,n=c({},e,{checked:r});return o.jsxs(be,{className:t.root,ownerState:n,children:[o.jsx(we,{fontSize:a,className:t.background,ownerState:n}),o.jsx(ye,{fontSize:a,className:t.dot,ownerState:n})]})}const Se=i.createContext(void 0),L=Se;function Be(){return i.useContext(L)}function Fe(e){return P("MuiRadio",e)}const N=q("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),Te=["checked","checkedIcon","color","icon","name","onChange","size","className"],$e=e=>{const{classes:r,color:t,size:a}=e,n={root:["root",`color${w(t)}`,a!=="medium"&&`size${w(a)}`]};return c({},r,_(n,Fe,r))},Ge=v(oe,{shouldForwardProp:e=>W(e)||e==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e;return[r.root,t.size!=="medium"&&r[`size${w(t.size)}`],r[`color${w(t.color)}`]]}})(({theme:e,ownerState:r})=>c({color:(e.vars||e).palette.text.secondary},!r.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${r.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette[r.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:D(r.color==="default"?e.palette.action.active:e.palette[r.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},r.color!=="default"&&{[`&.${N.checked}`]:{color:(e.vars||e).palette[r.color].main}},{[`&.${N.disabled}`]:{color:(e.vars||e).palette.action.disabled}}));function Ne(e,r){return typeof r=="object"&&r!==null?e===r:String(e)===String(r)}const I=o.jsx(V,{checked:!0}),z=o.jsx(V,{}),Ie=i.forwardRef(function(r,t){var a,n;const s=M({props:r,name:"MuiRadio"}),{checked:f,checkedIcon:d=I,color:x="primary",icon:m=z,name:h,onChange:k,size:p="medium",className:y}=s,j=$(s,Te),R=c({},s,{color:x,size:p}),l=$e(R),g=Be();let S=f;const O=H(k,g&&g.onChange);let B=h;return g&&(typeof S>"u"&&(S=Ne(g.value,s.value)),typeof B>"u"&&(B=g.name)),o.jsx(Ge,c({type:"radio",icon:i.cloneElement(m,{fontSize:(a=z.props.fontSize)!=null?a:p}),checkedIcon:i.cloneElement(d,{fontSize:(n=I.props.fontSize)!=null?n:p}),ownerState:R,classes:l,name:B,checked:S,onChange:O,ref:t,className:U(l.root,y)},j))}),T=Ie,ze=["actions","children","defaultValue","name","onChange","value"],Pe=i.forwardRef(function(r,t){const{actions:a,children:n,defaultValue:s,name:f,onChange:d,value:x}=r,m=$(r,ze),h=i.useRef(null),[k,p]=A({controlled:x,default:s,name:"RadioGroup"});i.useImperativeHandle(a,()=>({focus:()=>{let l=h.current.querySelector("input:not(:disabled):checked");l||(l=h.current.querySelector("input:not(:disabled)")),l&&l.focus()}}),[]);const y=Q(t,h),j=K(f),R=i.useMemo(()=>({name:j,onChange(l){p(l.target.value),d&&d(l,l.target.value)},value:k}),[j,d,p,k]);return o.jsx(L.Provider,{value:R,children:o.jsx(ke,c({role:"radiogroup",ref:y},m,{children:n}))})}),qe=Pe,Me=ee(),Ue=ce().shape({fullName:C().min(3,"Tối thiểu 3 ký tự!").max(50,"Tối đa 50 ký tự!").required("Tên không được để trống"),phone:C().matches(/^(?:\+?84|0)(3[2-9]|5[2689]|7[06-9]|8[1-9]|9[0-9])[0-9]{7}$/,"Số điện thoại không hợp lệ").required("Số điện thoại không được để trống"),email:C().email("Nhập đúng kiểu dữ liệu Email ( az@abc.com )").required("Email không được để trống"),password:C().min(6,"Tối thiểu 6 ký tự!").max(32,"Tối đa 32 ký tự!").required("Mật khẩu không được để trống"),role:C().required("Chưa chọn vai trò")});function Ke(){const e=re({initialValues:{fullName:"",phone:"",email:"",password:"",role:"customer"},validationSchema:Ue,onSubmit:t=>{r(t)}}),r=t=>{Z.promise(new Promise((a,n)=>{J({method:"post",url:`http://localhost:28240/api/v1/auth/${t.role}/register`,data:t}).then(s=>{a(s)}).catch(s=>{n(s)})}),{pending:"Đang tải dữ liệu...",success:"Đăng ký thành viên thành công!",error:"Đăng ký thành viên không thành công!"},{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:X}).then(()=>{console.log("Toast success"),e.resetForm()}).catch(a=>{console.log(a)})};return o.jsx(Y,{theme:Me,children:o.jsxs(te,{component:"main",maxWidth:"xs",children:[o.jsx(ue,{}),o.jsxs(G,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[o.jsx(ae,{sx:{m:1,bgcolor:"secondary.main"},children:o.jsx(ne,{})}),o.jsx(de,{component:"h1",variant:"h5",children:"Đăng ký"}),o.jsxs(G,{component:"form",noValidate:!0,onSubmit:e.handleSubmit,sx:{mt:3},children:[o.jsxs(u,{container:!0,spacing:2,children:[o.jsx(u,{item:!0,xs:12,children:o.jsx(b,{autoComplete:"given-name",name:"fullName",required:!0,fullWidth:!0,id:"fullName",label:"Họ và tên",value:e.values.fullName,onChange:e.handleChange,error:e.errors.fullName&&e.touched.fullName,helperText:e.touched.fullName&&e.errors.fullName,onBlur:e.handleBlur})}),o.jsx(u,{item:!0,xs:12,children:o.jsx(b,{required:!0,fullWidth:!0,id:"phone",label:"Số điện thoại",name:"phone",autoComplete:"family-name",value:e.values.phone,onChange:e.handleChange,error:e.errors.phone&&e.touched.phone,helperText:e.touched.phone&&e.errors.phone,onBlur:e.handleBlur})}),o.jsx(u,{item:!0,xs:12,children:o.jsx(b,{required:!0,fullWidth:!0,id:"email",label:"Địa chỉ Email",name:"email",autoComplete:"email",value:e.values.email,onChange:e.handleChange,error:e.errors.email&&e.touched.email,helperText:e.touched.email&&e.errors.email,onBlur:e.handleBlur})}),o.jsx(u,{item:!0,xs:12,children:o.jsx(b,{required:!0,fullWidth:!0,name:"password",label:"Mật khẩu",type:"password",id:"password",autoComplete:"new-password",value:e.values.password,onChange:e.handleChange,error:e.errors.password&&e.touched.password,helperText:e.touched.password&&e.errors.password,onBlur:e.handleBlur})}),o.jsx(u,{item:!0,xs:12,children:o.jsxs(se,{component:"fieldset",error:e.errors.role&&e.touched.role,children:[o.jsx(le,{component:"legend",children:"Tài khoản: "}),o.jsxs(qe,{name:"role",value:e.values.role,onChange:e.handleChange,onBlur:e.handleBlur,"aria-labelledby":"demo-row-radio-buttons-group-label",children:[o.jsx(F,{value:"customer",control:o.jsx(T,{}),label:"Khách hàng"}),o.jsx(F,{value:"store-manager",control:o.jsx(T,{}),label:"Quản lý cửa hàng"}),o.jsx(F,{value:"shipper",control:o.jsx(T,{}),label:"Tài xế"})]}),e.errors.role&&e.touched.role&&o.jsx(FormHelperText,{children:e.errors.role})]})})]}),o.jsx(pe,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,backgroundColor:"#ee4d2d","&:hover":{backgroundColor:"#ee4d2d"},"&:active":{backgroundColor:"#ee4d2d"}},children:"Đăng ký"}),o.jsx(u,{container:!0,justifyContent:"flex-end",children:o.jsx(u,{item:!0,children:o.jsx(ie,{href:"login",variant:"body2",children:"Đã có tài khoản? Đăng nhập"})})})]})]})]})})}export{Ke as default};
